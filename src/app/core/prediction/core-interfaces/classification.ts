import { IModel } from "./model";
import { IKerasModelConfig, IKerasModelSummary, IKerasModelTrainingHistory } from "./keras-models";



/* Regression Types at classification/types.py */





/* Classification */



/**
* Classification Configuration
* The configuration that was used to train and will predict based on.
*/
// @TODO





/* Classification Training Data */




/**
 * Active Training Data Position
 * When a position is opened, the active position dict is populated with the up and down price values
 * as well as the predictions generated by the Models. Once the position closes, the row dict
 * is completed with the up and down values
 */
export interface ITrainingDataActivePosition {
    // The price in which the position will be closed as up
    up_price: number,

    // The price in which the position will be closed as down
    down_price: number,

    // Model's features which will be completed with labels once the position closes
    row: {[modelID: string]: number}
}




/**
 * Training Data Insights
 * Data used to represent the proportions for the price changes and the position types generated by the 
 * models.
 */
export interface ITrainingDataPriceActionsInsight {
    up: number,
    down: number
}
export interface ITrainingDataPredictionInsight {
    long: number,
    short: number,
    neutral: number
}
export interface ITrainingDataPredictionInsights {
    [modelID: string]: ITrainingDataPredictionInsight
}




/**
 * Training Data Config
 * The Training configuration that resides in the configuration file and it is used to initialize
 * the training data generator.
 */
export interface ITrainingDataConfig {
    // The description of the Training Data that will be generated.
    description: string,

    // Start and end time - If none provided, will use all the available data
    start: string|number|null,
    end: string|number|null,

    // Percentages that will determine if the price moved up or down after a position is opened
    up_percent_change: number,
    down_percent_change: number,

    // The list of ArimaModels|RegressionModels that will be used to predict
    models: IModel[]
}




/**
 * Compressed Training Data
 * In order to optimize the size of the training data file, the data is converted into a dict
 * with the rows and columns lists.
 */
export interface ICompressedTrainingData {
    columns: string[],
    rows: Array<number[]>
}




/**
 * Training Data File
 * The dict that contains all the information needed to train a ClassificationModel.
 */
export interface ITrainingDataFile {
    // Universally Unique Identifier (uuid4)
    id: string,

    // The description of the Training Data that will be generated.
    description: string,

    // The timestamp in which the Training Data was generated
    creation: number,

    // Start and end time
    start: number,  // First candlestick's ot
    end: number,    // Last candlestick's ct

    // The number of minutes that took to generate the training data
    duration_minutes: number,

    // Percentages that will determine if the price moved up or down after a position is opened
    up_percent_change: number,
    down_percent_change: number,

    // List of ArimaModels|RegressionModels
    models: IModel[],

    // Price Actions Insight - The up and down percentage proportions
    price_actions_insight: ITrainingDataPriceActionsInsight,

    // Prediction Insight 
    // Position type percentage proportions for each single model in this format:
    // {[modelID: str]: ITrainingDataPredictionInsight}
    predictions_insight: ITrainingDataPredictionInsights,

    // Training Data
    // The training data generated in a compressed format.
    training_data: ICompressedTrainingData
}









/* Classification Training */


