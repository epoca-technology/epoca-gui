<mat-toolbar mat-dialog-title color="primary" fxLayout="row" fxLayoutAlign="start center">
    <div fxLayout="row" fxLayoutAlign="center center">
        <button mat-icon-button class="show-on-mobile" (click)="cancel()" [disabled]="submitting"><mat-icon>arrow_back</mat-icon></button>
        <span class="truncate">Trading Strategy</span>
        <span fxFlex></span>
        <button mat-icon-button (click)="update()" [disabled]="submitting || (!form || form.invalid)" matTooltip="Update Strategy"><mat-icon>save</mat-icon></button>
        <button mat-icon-button [disabled]="submitting" (click)="tradingStrategyTooltip()" matTooltip="More information" type="button" tabindex="-1"><mat-icon>question_mark</mat-icon></button>
        <button mat-icon-button class="show-on-desktop" (click)="cancel()" [disabled]="submitting"><mat-icon>close</mat-icon></button>
    </div>
</mat-toolbar>
<div mat-dialog-content>
    <!-- Loader -->
    <div *ngIf="!loaded">
        <div class="section-loader show-on-mobile"><div fxLayout="row" fxLayoutAlign="center center"><mat-spinner diameter="50"></mat-spinner></div></div>
        <div class="loader show-on-desktop"><div fxLayout="row" fxLayoutAlign="center center"><mat-spinner diameter="50"></mat-spinner></div></div>
    </div>
    <div *ngIf="loaded && strategy" class="padding fadeIn">
        <!-- Form -->
        <div *ngIf="form">
            <form [formGroup]="form" (ngSubmit)="update()">
                <!-- Profit Optimization -->
                <div>
                    <div fxLayout="row" fxLayoutAlign="start center">
                        <h6>Profit Optimization Strategy</h6>
                        <span fxFlex></span>
                        <button mat-icon-button (click)="profitOptimizationTooltip()" matTooltip="More information" type="button" tabindex="-1"><mat-icon>question_mark</mat-icon></button>
                    </div>

                    <!-- Take Profit Levels -->
                    <div class="margin-top">
                        <!-- Take Profit 1 -->
                        <div class="margin-top">
                            <div fxLayout="row" fxLayoutAlign="center center">
                                <div>
                                    <p><strong>#1&nbsp;&nbsp;&nbsp;</strong></p>
                                </div>
                                <div fxFlex>
                                    <mat-form-field>
                                        <mat-label>Take Profit%</mat-label>
                                        <input type="number"
                                            matInput
                                            formControlName="take_profit_1_pcr"
                                            autocomplete="off"
                                            [appDisableControl]="submitting"
                                            placeholder="e.g. 0.75">
                                    </mat-form-field>
                                </div>
                                <span fxFlex="5"></span>
                                <div fxFlex>
                                    <mat-form-field>
                                        <mat-label>Max Gain Drawdown%</mat-label>
                                        <input type="number"
                                            matInput
                                            formControlName="take_profit_1_gdd"
                                            autocomplete="off"
                                            [appDisableControl]="submitting"
                                            placeholder="e.g. -80">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>

                        <!-- Take Profit 2 -->
                        <div class="margin-top">
                            <div fxLayout="row" fxLayoutAlign="center center">
                                <div>
                                    <p><strong>#2&nbsp;&nbsp;&nbsp;</strong></p>
                                </div>
                                <div fxFlex>
                                    <mat-form-field>
                                        <mat-label>Take Profit%</mat-label>
                                        <input type="number"
                                            matInput
                                            formControlName="take_profit_2_pcr"
                                            autocomplete="off"
                                            [appDisableControl]="submitting"
                                            placeholder="e.g. 1.5">
                                    </mat-form-field>
                                </div>
                                <span fxFlex="5"></span>
                                <div fxFlex>
                                    <mat-form-field>
                                        <mat-label>Max Gain Drawdown%</mat-label>
                                        <input type="number"
                                            matInput
                                            formControlName="take_profit_2_gdd"
                                            autocomplete="off"
                                            [appDisableControl]="submitting"
                                            placeholder="e.g. -60">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>

                        <!-- Take Profit 3 -->
                        <div class="margin-top">
                            <div fxLayout="row" fxLayoutAlign="center center">
                                <div>
                                    <p><strong>#3&nbsp;&nbsp;&nbsp;</strong></p>
                                </div>
                                <div fxFlex>
                                    <mat-form-field>
                                        <mat-label>Take Profit%</mat-label>
                                        <input type="number"
                                            matInput
                                            formControlName="take_profit_3_pcr"
                                            autocomplete="off"
                                            [appDisableControl]="submitting"
                                            placeholder="e.g. 2.25">
                                    </mat-form-field>
                                </div>
                                <span fxFlex="5"></span>
                                <div fxFlex>
                                    <mat-form-field>
                                        <mat-label>Max Gain Drawdown%</mat-label>
                                        <input type="number"
                                            matInput
                                            formControlName="take_profit_3_gdd"
                                            autocomplete="off"
                                            [appDisableControl]="submitting"
                                            placeholder="e.g. -40">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- Stop Loss -->
                <div class="margin-top">
                    <div fxLayout="row" fxLayoutAlign="start center">
                        <h6>Loss Optimization Strategy</h6>
                        <span fxFlex></span>
                        <button mat-icon-button (click)="lossOptimizationTooltip()" matTooltip="More information" type="button" tabindex="-1"><mat-icon>question_mark</mat-icon></button>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start start" class="section-content">
                        <div fxFlex>
                            <mat-form-field>
                                <mat-label>Stop Loss%</mat-label>
                                <input type="number"
                                       matInput
                                       formControlName="stop_loss"
                                       autocomplete="off"
                                       [appDisableControl]="submitting"
                                       placeholder="e.g. 3">
                            </mat-form-field>
                        </div>
                        <span fxFlex="5"></span>
                        <div fxFlex>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
