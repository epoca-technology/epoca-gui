<!-- Section Container -->
<mat-drawer-container class="section-container component-container">

    <!-- Main Sidenav -->
    <mat-drawer #classTrainingCertificatesSidenav [(opened)]="classTrainingCertificatesSidenavOpened" *ngIf="initialized"
                class="sidenav" position="start" mode="over" autoFocus="false">
        <!-- Menu Heading Toolbar -->
        <mat-toolbar color="primary">
            <div fxLayout="row" fxLayoutAlign="start center">
                <button mat-icon-button (click)="classTrainingCertificatesSidenav?.toggle()"><mat-icon>arrow_back</mat-icon></button>
                <span class="truncate">Class. Training Certificates</span>
                <span fxFlex></span>
            </div>
        </mat-toolbar>

        <!-- Menu Content -->
        <mat-list>
            <div mat-subheader>General</div>
            <mat-list-item *ngFor="let sect of generalSections">
                <button mat-button class="left-icon-button" [disabled]="section.id == sect.id" (click)="navigate(sect.id)">
                    <mat-icon>{{sect.icon}}</mat-icon> {{sect.name}}
                </button>
            </mat-list-item>
            <div mat-subheader>
                Certificates&nbsp;
                <mat-icon *ngIf="order == 'general_points'" class="order-icon" matTooltip="Ordered by General Points">query_stats</mat-icon>
                <mat-icon *ngIf="order == 'class_eval_acc'" class="order-icon" matTooltip="Ordered by Classification Evaluation Accuracy">rule</mat-icon>
                <mat-icon *ngIf="order == 'class_eval_points'" class="order-icon" matTooltip="Ordered by Classification Evaluation Points">attach_money</mat-icon>
                <mat-icon *ngIf="order == 'test_ds_acc'" class="order-icon" matTooltip="Ordered by Test Dataset Evaluation Accuracy">playlist_add_check</mat-icon>
            </div>
            <mat-list-item *ngFor="let certificate of _training.certificates; index as certIndex">
                <button mat-button class="left-icon-button truncate" 
                        [disabled]="section.id == 'certificate' && cert && certificate.id == cert.id" 
                        (click)="navigate('certificate', certIndex)">
                        <div fxLayout="row" fxLayoutAlign="start center">
                            <span class="truncate" style="max-width: 70%;">{{certificate.id}}</span>
                            <span fxFlex></span>
                            <div *ngIf="order == 'general_points'" 
                                [ngClass]="certificate.general.state_class" 
                                class="square-badge"><span>{{certificate.general.points | number: '1.2-2'}}</span></div>
                            <div *ngIf="order == 'class_eval_acc'" class="square-badge"><span>{{certificate.classification_evaluation.acc | number: '1.2-2'}}%</span></div>
                            <div *ngIf="order == 'class_eval_points'"
                                [ngClass]="{
                                    'square-badge': certificate.classification_evaluation.points_median == 0,
                                    'square-badge-success': certificate.classification_evaluation.points_median > 0,
                                    'square-badge-error': certificate.classification_evaluation.points_median < 0
                                }">
                                <span>
                                    {{certificate.classification_evaluation.points_median | number: '1.2-2'}}
                                </span>
                            </div>
                            <div *ngIf="order == 'test_ds_acc'" class="square-badge"><span>{{certificate.test_evaluation[1] | percent: '1.2-2'}}</span></div>
                        </div>
                </button>
            </mat-list-item>
        </mat-list>
    </mat-drawer>


    <!-- Section Content -->
    <mat-drawer-content id="content-header">
        <!-- Content Header -->
        <mat-toolbar class="secondary-header">
            <div fxLayout="row" fxLayoutAlign="center center">
                <button mat-icon-button (click)="_nav.dashboard()" class="show-on-mobile" *ngIf="!initialized"><mat-icon>arrow_back</mat-icon></button>
                <button mat-icon-button (click)="reset()" class="show-on-mobile" *ngIf="initialized && _training.certificates && _training.certificates.length >= 1"><mat-icon>arrow_back</mat-icon></button>
                <button mat-icon-button (click)="classTrainingCertificatesSidenav?.toggle()" *ngIf="initialized" class="show-on-mobile"><mat-icon>menu</mat-icon></button>
                <span class="truncate show-on-mobile" *ngIf="!initialized">Class. Training Certificates</span>
                <span class="truncate show-on-mobile" *ngIf="initialized">{{section.id == 'certificate' ? cert!.id: section.name}}</span>
                <span class="truncate show-on-desktop">Classification Training Certificates</span>
                <span fxFlex></span>
                <button mat-icon-button 
                        matTooltip="Clear Training Certificates"
                        (click)="reset()"
                        class="show-on-desktop"
                        *ngIf="initialized"><mat-icon>close</mat-icon></button>
            </div>
        </mat-toolbar>



        <!-- Uninitialized Content -->
        <div *ngIf="!initialized" class="fadeIn">
            <div fxLayout="row" fxLayoutAlign="center center" class="file-init-container">
                <!-- Button -->
                <label for="certificatesFile" class="file-label" role="button" matRipple *ngIf="!initializing">
                    <div fxLayout="row" fxLayoutAlign="start center" matRipple role="button" tabindex="0">
                        <mat-icon svgIcon="file_signature"></mat-icon>&nbsp;
                        <p>Select Certificates</p>
                    </div>
                </label>

                <!-- Input -->
                <form [formGroup]="fileInputForm">
                    <input id="certificatesFile" type="file" accept="application/json" 
                            formControlName="fileInput" (change)="fileChanged($event)" multiple/>
                </form>

                <!-- Initializing Loader-->
                <h3 *ngIf="initializing" class="fadeIn">Initializing...</h3>
            </div>
        </div>



        <!-- Initialized Content -->
        <div *ngIf="initialized" class="fadeIn">
            <!-- Sections -->
            <div fxLayout="row">
                <div *ngIf="layout == 'desktop'" class="desktop-sidenav">
                    <mat-list>
                        <div mat-subheader>General</div>
                        <mat-list-item *ngFor="let sect of generalSections">
                            <button mat-button class="left-icon-button" [disabled]="section.id == sect.id" (click)="navigate(sect.id)">
                                <mat-icon>{{sect.icon}}</mat-icon> {{sect.name}}
                            </button>
                        </mat-list-item>
                        <div mat-subheader>
                            Certificates&nbsp;
                            <mat-icon *ngIf="order == 'general_points'" class="order-icon" matTooltip="Ordered by General Points">query_stats</mat-icon>
                            <mat-icon *ngIf="order == 'class_eval_acc'" class="order-icon" matTooltip="Ordered by Classification Evaluation Accuracy">rule</mat-icon>
                            <mat-icon *ngIf="order == 'class_eval_points'" class="order-icon" matTooltip="Ordered by Classification Evaluation Points">attach_money</mat-icon>
                            <mat-icon *ngIf="order == 'test_ds_acc'" class="order-icon" matTooltip="Ordered by Test Dataset Evaluation Accuracy">playlist_add_check</mat-icon>
                        </div>
                        <mat-list-item *ngFor="let certificate of _training.certificates; index as certIndex">
                            <button mat-button class="left-icon-button truncate" 
                                    [disabled]="section.id == 'certificate' && cert && certificate.id == cert.id" 
                                    (click)="navigate('certificate', certIndex)">
                                    <div fxLayout="row" fxLayoutAlign="start center">
                                        <span class="truncate" style="max-width: 70%;">{{certificate.id}}</span>
                                        <span fxFlex></span>
                                        <div *ngIf="order == 'general_points'" 
                                        [ngClass]="certificate.general.state_class" 
                                        class="square-badge"><span>{{certificate.general.points | number: '1.2-2'}}</span></div>
                                        <div *ngIf="order == 'class_eval_acc'" class="square-badge"><span>{{certificate.classification_evaluation.acc | number: '1.2-2'}}%</span></div>
                                        <div *ngIf="order == 'class_eval_points'"
                                            [ngClass]="{
                                                'square-badge': certificate.classification_evaluation.points_median == 0,
                                                'square-badge-success': certificate.classification_evaluation.points_median > 0,
                                                'square-badge-error': certificate.classification_evaluation.points_median < 0
                                            }">
                                            <span>
                                                {{certificate.classification_evaluation.points_median | number: '1.2-2'}}
                                            </span>
                                        </div>
                                        <div *ngIf="order == 'test_ds_acc'" class="square-badge"><span>{{certificate.test_evaluation[1] | percent: '1.2-2'}}</span></div>
                                    </div>
                            </button>
                        </mat-list-item>
                    </mat-list>
                </div>
                <div fxFlex>
                    <!-- Loader -->
                    <div *ngIf="!loaded" class="loader">
                        <div fxLayout="row" fxLayoutAlign="center center"><mat-spinner diameter="50"></mat-spinner></div>
                    </div>

                    <!-- Sections -->
                    <div *ngIf="loaded" class="fadeIn">
                        <!-- General Sections -->
                        <div class="general-sections" 
                            *ngIf="section.id != 'certificate' && points && classAccuracies && classGeneralPoints && classPredictions && classIncreaseProbs && 
                            classSuccessfulIncreaseProbs && classDecreaseProbs && classSuccessfulDecreaseProbs && testDSEvaluations && epochs">


                            <!-- General Evaluation-->
                            <div *ngIf="section.id == 'general_evaluations'" class="epochs">
                                <div fxLayout="row" fxLayoutAlign="center center">
                                    <div fxFlex="60" fxFlex.xs="100" fxFlex.sm="100">
                                        <div class="desktop-card">
                                            <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                <h3 class="show-on-desktop">General Evaluations</h3>
                                                <span class="show-on-desktop" fxFlex></span>
                                                <div class="square-badge clickable" role="button"
                                                    (click)="navigate('certificate', _training.pointsMetadata.best.index)"
                                                    matTooltip="Highest # of Points: {{_training.pointsMetadata.best.id}}">
                                                    Best: {{_training.pointsMetadata.best.value | number: '1.0-2'}}
                                                </div>
                                                <div class="square-badge clickable lowest" role="button"
                                                    (click)="navigate('certificate', _training.pointsMetadata.worst.index)"
                                                    matTooltip="Lowest # of Points: {{_training.pointsMetadata.worst.id}}">
                                                    Worst: {{_training.pointsMetadata.worst.value | number: '1.0-2'}}
                                                </div>
                                            </div>
                                            <apx-chart
                                                [series]="points.series"
                                                [chart]="points.chart"
                                                [plotOptions]="points.plotOptions"
                                                [xaxis]="points.xaxis"
                                                [yaxis]="points.yaxis"
                                                [dataLabels]="points.dataLabels"
                                                [colors]="points.colors"
                                                [grid]="points.grid"
                                            ></apx-chart>
                                        </div>
                                    </div>
                                </div>
                            </div>




                            <!-- Classification Evaluation -->
                            <div *ngIf="section.id == 'class_evaluations'" class="class_evaluations">
                                <!-- Tabs Navigation-->
                                <mat-tab-group *ngIf="layout == 'mobile'" 
                                            [selectedIndex]="activeClassTabIndex" (selectedIndexChange)="activeClassTabIndex = $event"
                                            class="mat-elevation-z3" backgroundColor="primary">
                                    <mat-tab><ng-template mat-tab-label><mat-icon>ads_click</mat-icon></ng-template></mat-tab>
                                    <mat-tab><ng-template mat-tab-label><mat-icon>attach_money</mat-icon></ng-template></mat-tab>
                                    <mat-tab><ng-template mat-tab-label><mat-icon svgIcon="wand_magic_sparkles" class="wand-icon"></mat-icon></ng-template></mat-tab>
                                    <mat-tab><ng-template mat-tab-label><mat-icon>trending_up</mat-icon></ng-template></mat-tab>
                                    <mat-tab><ng-template mat-tab-label><mat-icon>trending_down</mat-icon></ng-template></mat-tab>
                                </mat-tab-group>
                                <mat-tab-group *ngIf="layout == 'desktop'"  
                                                [selectedIndex]="activeClassTabIndex" (selectedIndexChange)="activeClassTabIndex = $event" 
                                                mat-align-tabs="center">
                                    <mat-tab><ng-template mat-tab-label><mat-icon>ads_click</mat-icon>&nbsp;Accuracies</ng-template></mat-tab>            
                                    <mat-tab><ng-template mat-tab-label><mat-icon>attach_money</mat-icon>&nbsp;Points</ng-template></mat-tab>               
                                    <mat-tab><ng-template mat-tab-label><mat-icon svgIcon="wand_magic_sparkles" class="wand-icon"></mat-icon>&nbsp;Predictions</ng-template></mat-tab>         
                                    <mat-tab><ng-template mat-tab-label><mat-icon>trending_up</mat-icon>&nbsp;Increase Probs.</ng-template></mat-tab>            
                                    <mat-tab><ng-template mat-tab-label><mat-icon>trending_down</mat-icon>&nbsp;Decrease Probs.</ng-template></mat-tab>            
                                </mat-tab-group>

                                <!-- General Classification Content-->
                                <div class="padding">

                                    <!-- Accuracies-->
                                    <div *ngIf="activeClassTabIndex == 0">
                                        <div fxLayout="row" fxLayoutAlign="center center">
                                            <div fxFlex="60" fxFlex.xs="100" fxFlex.sm="100">
                                                <div class="desktop-card">
                                                    <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                        <h3 class="show-on-desktop">Accuracies</h3>
                                                        <span class="show-on-desktop" fxFlex></span>
                                                        <div class="square-badge clickable" role="button"
                                                            (click)="navigate('certificate', _training.accuraciesMetadata.best.index)"
                                                            matTooltip="Best Accuracy: {{_training.accuraciesMetadata.best.id}}">
                                                            Best: {{_training.accuraciesMetadata.best.value | number: '1.2-3'}}%
                                                        </div>
                                                        <div class="square-badge clickable lowest" role="button"
                                                            (click)="navigate('certificate', _training.accuraciesMetadata.worst.index)"
                                                            matTooltip="Worst Accuracy: {{_training.accuraciesMetadata.worst.id}}">
                                                            Worst: {{_training.accuraciesMetadata.worst.value | number: '1.2-3'}}%
                                                        </div>
                                                    </div>
                                                    <div class="margin-top">
                                                        <apx-chart
                                                            [series]="classAccuracies.series"
                                                            [chart]="classAccuracies.chart"
                                                            [plotOptions]="classAccuracies.plotOptions"
                                                            [xaxis]="classAccuracies.xaxis"
                                                            [yaxis]="classAccuracies.yaxis"
                                                            [dataLabels]="classAccuracies.dataLabels"
                                                            [colors]="classAccuracies.colors"
                                                            [grid]="classAccuracies.grid"
                                                            [legend]="{position: 'top'}"
                                                        ></apx-chart>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <!-- Points-->
                                    <div *ngIf="activeClassTabIndex == 1">
                                        <div fxLayout="row" fxLayoutAlign="center center">
                                            <div fxFlex="60" fxFlex.xs="100" fxFlex.sm="100">
                                                <div class="desktop-card">
                                                    <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                        <h3 class="show-on-desktop">Points</h3>
                                                        <span class="show-on-desktop" fxFlex></span>
                                                        <div class="square-badge clickable" role="button"
                                                            (click)="navigate('certificate', _training.classPointsMetadata.best.index)"
                                                            matTooltip="Best Points: {{_training.classPointsMetadata.best.id}}">
                                                            Best: {{_training.classPointsMetadata.best.value | number: '1.2-3'}}
                                                        </div>
                                                        <div class="square-badge clickable lowest" role="button"
                                                            (click)="navigate('certificate', _training.classPointsMetadata.worst.index)"
                                                            matTooltip="Worst Points: {{_training.classPointsMetadata.worst.id}}">
                                                            Worst: {{_training.classPointsMetadata.worst.value | number: '1.0-2'}}
                                                        </div>
                                                    </div>
                                                    <div class="margin-top">
                                                        <apx-chart
                                                            [series]="classGeneralPoints.series"
                                                            [chart]="classGeneralPoints.chart"
                                                            [plotOptions]="classGeneralPoints.plotOptions"
                                                            [xaxis]="classGeneralPoints.xaxis"
                                                            [yaxis]="classGeneralPoints.yaxis"
                                                            [dataLabels]="classGeneralPoints.dataLabels"
                                                            [colors]="classGeneralPoints.colors"
                                                            [grid]="classGeneralPoints.grid"
                                                        ></apx-chart>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <!-- Predictions -->
                                    <div *ngIf="activeClassTabIndex == 2">
                                        <div fxLayout="row" fxLayoutAlign="center center">
                                            <div fxFlex="60" fxFlex.xs="100" fxFlex.sm="100">
                                                <div class="desktop-card">
                                                    <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                        <h3 class="show-on-desktop">Predictions</h3>
                                                        <span class="show-on-desktop" fxFlex></span>
                                                        <div class="square-badge clickable" role="button"
                                                            (click)="navigate('certificate', _training.predictionsMetadata.highest.index)"
                                                            matTooltip="Highest # of Predictions: {{_training.predictionsMetadata.highest.id}}">
                                                            Highest: {{_training.predictionsMetadata.highest.value | number}}
                                                        </div>
                                                        <div class="square-badge clickable lowest" role="button"
                                                            (click)="navigate('certificate', _training.predictionsMetadata.lowest.index)"
                                                            matTooltip="Lowest # of Predictions: {{_training.predictionsMetadata.lowest.id}}">
                                                            Lowest: {{_training.predictionsMetadata.lowest.value | number}}
                                                        </div>
                                                    </div>
                                                    <div class="margin-top">
                                                        <apx-chart
                                                            [series]="classPredictions.series"
                                                            [chart]="classPredictions.chart"
                                                            [plotOptions]="classPredictions.plotOptions"
                                                            [xaxis]="classPredictions.xaxis"
                                                            [yaxis]="classPredictions.yaxis"
                                                            [dataLabels]="classPredictions.dataLabels"
                                                            [colors]="classPredictions.colors"
                                                            [grid]="classPredictions.grid"
                                                            [legend]="{position: 'top'}"
                                                        ></apx-chart>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Increase Probabilities -->
                                    <div *ngIf="activeClassTabIndex == 3">
                                        <div fxLayout="row" fxLayout.xs="column" fxLayout.sm="column" fxLayoutAlign="center center">
                                            <div fxFlex="48" fxFlex.xs="100" fxFlex.sm="100" class="full-width">
                                                <div class="desktop-card">
                                                    <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                        <h3 class="truncate">{{layout == 'desktop' ? 'Increase Probabilities': 'Incr. Prob.'}}</h3>
                                                        <span fxFlex></span>
                                                        <div class="square-badge-success clickable" role="button"
                                                            (click)="navigate('certificate', _training.increaseProbsMetadata.highest.index)"
                                                            matTooltip="Highest Increase Prediction Probability Mean: {{_training.increaseProbsMetadata.highest.id}}">
                                                            {{_training.increaseProbsMetadata.highest.value | number}}
                                                        </div>
                                                        <div class="square-badge-success clickable lowest" role="button"
                                                            (click)="navigate('certificate', _training.increaseProbsMetadata.lowest.index)"
                                                            matTooltip="Lowest Increase Prediction Probability Mean: {{_training.increaseProbsMetadata.lowest.id}}">
                                                            {{_training.increaseProbsMetadata.lowest.value | number}}
                                                        </div>
                                                    </div>
                                                    <div class="margin-top">
                                                        <apx-chart
                                                            [series]="classIncreaseProbs.series"
                                                            [chart]="classIncreaseProbs.chart"
                                                            [plotOptions]="classIncreaseProbs.plotOptions"
                                                            [xaxis]="classIncreaseProbs.xaxis"
                                                            [yaxis]="classIncreaseProbs.yaxis"
                                                            [dataLabels]="classIncreaseProbs.dataLabels"
                                                            [colors]="classIncreaseProbs.colors"
                                                            [grid]="classIncreaseProbs.grid"
                                                        ></apx-chart>
                                                    </div>
                                                </div>
                                            </div>

                                            <span fxFlex></span>
                                            <div class="divider show-on-mobile"></div>

                                            <div fxFlex="48" fxFlex.xs="100" fxFlex.sm="100" class="full-width">
                                                <div class="desktop-card">
                                                    <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                        <h3 class="truncate">{{layout == 'desktop' ? 'Successful Increase Probabilities': 'Succ. Incr. Prob.'}}</h3>
                                                        <span fxFlex></span>
                                                        <div class="square-badge-success clickable" role="button"
                                                            (click)="navigate('certificate', _training.successfulIncreaseProbsMetadata.highest.index)"
                                                            matTooltip="Highest Successful Increase Prediction Probability Mean: {{_training.successfulIncreaseProbsMetadata.highest.id}}">
                                                            {{_training.successfulIncreaseProbsMetadata.highest.value | number}}
                                                        </div>
                                                        <div class="square-badge-success clickable lowest" role="button"
                                                            (click)="navigate('certificate', _training.successfulIncreaseProbsMetadata.lowest.index)"
                                                            matTooltip="Lowest Successful Increase Prediction Probability Mean: {{_training.successfulIncreaseProbsMetadata.lowest.id}}">
                                                            {{_training.successfulIncreaseProbsMetadata.lowest.value | number}}
                                                        </div>
                                                    </div>
                                                    <div class="margin-top">
                                                        <apx-chart
                                                            [series]="classSuccessfulIncreaseProbs.series"
                                                            [chart]="classIncreaseProbs.chart"
                                                            [plotOptions]="classIncreaseProbs.plotOptions"
                                                            [xaxis]="classIncreaseProbs.xaxis"
                                                            [yaxis]="classIncreaseProbs.yaxis"
                                                            [dataLabels]="classIncreaseProbs.dataLabels"
                                                            [colors]="classIncreaseProbs.colors"
                                                            [grid]="classIncreaseProbs.grid"
                                                        ></apx-chart>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <!-- Decrease Probabilities -->
                                    <div *ngIf="activeClassTabIndex == 4">
                                        <div fxLayout="row" fxLayout.xs="column" fxLayout.sm="column" fxLayoutAlign="center center">
                                            <div fxFlex="48" fxFlex.xs="100" fxFlex.sm="100" class="full-width">
                                                <div class="desktop-card">
                                                    <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                        <h3 class="truncate">{{layout == 'desktop' ? 'Decrease Probabilities': 'Decr. Prob.'}}</h3>
                                                        <span fxFlex></span>
                                                        <div class="square-badge-error clickable" role="button"
                                                            (click)="navigate('certificate', _training.decreaseProbsMetadata.highest.index)"
                                                            matTooltip="Highest Decrease Prediction Probability Mean: {{_training.decreaseProbsMetadata.highest.id}}">
                                                            {{_training.decreaseProbsMetadata.highest.value | number}}
                                                        </div>
                                                        <div class="square-badge-error clickable lowest" role="button"
                                                            (click)="navigate('certificate', _training.decreaseProbsMetadata.lowest.index)"
                                                            matTooltip="Lowest Decrease Prediction Probability Mean: {{_training.decreaseProbsMetadata.lowest.id}}">
                                                            {{_training.decreaseProbsMetadata.lowest.value | number}}
                                                        </div>
                                                    </div>
                                                    <div class="margin-top">
                                                        <apx-chart
                                                            [series]="classDecreaseProbs.series"
                                                            [chart]="classDecreaseProbs.chart"
                                                            [plotOptions]="classDecreaseProbs.plotOptions"
                                                            [xaxis]="classDecreaseProbs.xaxis"
                                                            [yaxis]="classDecreaseProbs.yaxis"
                                                            [dataLabels]="classDecreaseProbs.dataLabels"
                                                            [colors]="classDecreaseProbs.colors"
                                                            [grid]="classDecreaseProbs.grid"
                                                        ></apx-chart>
                                                    </div>
                                                </div>
                                            </div>

                                            <span fxFlex></span>
                                            <div class="divider show-on-mobile"></div>

                                            <div fxFlex="48" fxFlex.xs="100" fxFlex.sm="100" class="full-width">
                                                <div class="desktop-card">
                                                    <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                        <h3 class="truncate">{{layout == 'desktop' ? 'Successful Decrease Probabilities': 'Succ. Incr. Prob.'}}</h3>
                                                        <span fxFlex></span>
                                                        <div class="square-badge-error clickable" role="button"
                                                            (click)="navigate('certificate', _training.successfulDecreaseProbsMetadata.highest.index)"
                                                            matTooltip="Highest Successful Decrease Prediction Probability Mean: {{_training.successfulDecreaseProbsMetadata.highest.id}}">
                                                            {{_training.successfulDecreaseProbsMetadata.highest.value | number}}
                                                        </div>
                                                        <div class="square-badge-error clickable lowest" role="button"
                                                            (click)="navigate('certificate', _training.successfulDecreaseProbsMetadata.lowest.index)"
                                                            matTooltip="Lowest Successful Decrease Prediction Probability Mean: {{_training.successfulDecreaseProbsMetadata.lowest.id}}">
                                                            {{_training.successfulDecreaseProbsMetadata.lowest.value | number}}
                                                        </div>
                                                    </div>
                                                    <div class="margin-top">
                                                        <apx-chart
                                                            [series]="classSuccessfulDecreaseProbs.series"
                                                            [chart]="classSuccessfulDecreaseProbs.chart"
                                                            [plotOptions]="classSuccessfulDecreaseProbs.plotOptions"
                                                            [xaxis]="classSuccessfulDecreaseProbs.xaxis"
                                                            [yaxis]="classSuccessfulDecreaseProbs.yaxis"
                                                            [dataLabels]="classSuccessfulDecreaseProbs.dataLabels"
                                                            [colors]="classSuccessfulDecreaseProbs.colors"
                                                            [grid]="classSuccessfulDecreaseProbs.grid"
                                                        ></apx-chart>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            

                            <!-- Test Dataset Evaluations-->
                            <div *ngIf="section.id == 'evaluations'" class="evaluations">
                                <div fxLayout="row" fxLayoutAlign="center center">
                                    <div fxFlex="60" fxFlex.xs="100" fxFlex.sm="100">
                                        <div class="desktop-card">
                                            <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                <h3 class="show-on-desktop">Test DS Evaluations</h3>
                                                <span class="show-on-desktop" fxFlex></span>
                                                <div class="square-badge-success clickable" role="button"
                                                    (click)="navigate('certificate', _training.testDSMetadata.best.index)"
                                                    matTooltip="Best Val Accuracy: {{_training.testDSMetadata.best.id}}">
                                                    Best: {{_training.testDSMetadata.best.value | number: '1.2-3'}}
                                                </div>
                                                <div class="square-badge-success clickable lowest" role="button"
                                                    (click)="navigate('certificate', _training.testDSMetadata.worst.index)"
                                                    matTooltip="Worst Val Accuracy: {{_training.testDSMetadata.worst.id}}">
                                                    Worst: {{_training.testDSMetadata.worst.value | number: '1.2-3'}}
                                                </div>
                                            </div>
                                            <div class="margin-top">
                                                <apx-chart
                                                    [series]="testDSEvaluations.series"
                                                    [chart]="testDSEvaluations.chart"
                                                    [plotOptions]="testDSEvaluations.plotOptions"
                                                    [xaxis]="testDSEvaluations.xaxis"
                                                    [yaxis]="testDSEvaluations.yaxis"
                                                    [dataLabels]="testDSEvaluations.dataLabels"
                                                    [colors]="testDSEvaluations.colors"
                                                    [grid]="testDSEvaluations.grid"
                                                    [legend]="{position: 'top'}"
                                                ></apx-chart>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
                            <!-- Epochs-->
                            <div *ngIf="section.id == 'epochs'" class="epochs">
                                <div fxLayout="row" fxLayoutAlign="center center">
                                    <div fxFlex="60" fxFlex.xs="100" fxFlex.sm="100">
                                        <div class="desktop-card">
                                            <div fxLayout="row" fxLayoutAlign="center center" class="badged-header">
                                                <h3 class="show-on-desktop">Epochs</h3>
                                                <span class="show-on-desktop" fxFlex></span>
                                                <div class="square-badge clickable" role="button"
                                                    (click)="navigate('certificate', _training.epochsMetadata.highest.index)"
                                                    matTooltip="Highest # of Epochs: {{_training.epochsMetadata.highest.id}}">
                                                    Highest: {{_training.epochsMetadata.highest.value | number}}
                                                </div>
                                                <div class="square-badge clickable lowest" role="button"
                                                    (click)="navigate('certificate', _training.epochsMetadata.lowest.index)"
                                                    matTooltip="Lowest # of Epochs: {{_training.epochsMetadata.lowest.id}}">
                                                    Lowest: {{_training.epochsMetadata.lowest.value | number}}
                                                </div>
                                            </div>
                                            <apx-chart
                                                [series]="epochs.series"
                                                [chart]="epochs.chart"
                                                [plotOptions]="epochs.plotOptions"
                                                [xaxis]="epochs.xaxis"
                                                [yaxis]="epochs.yaxis"
                                                [dataLabels]="epochs.dataLabels"
                                                [colors]="epochs.colors"
                                                [grid]="epochs.grid"
                                            ></apx-chart>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
    
    
    
                        <!-- Certificate Section -->
                        <div class="certificate-section" 
                            *ngIf="section.id == 'certificate' && cert && testDSEvaluation && testDSLoss && testDSAccuracy && 
                            classAccuracy && classPoints && classPrediction && classOutcome">
                            <!-- Tabs Navigation-->
                            <mat-tab-group *ngIf="layout == 'mobile'" 
                                        [selectedIndex]="activeTabIndex" (selectedIndexChange)="activeTabIndex = $event"
                                        mat-stretch-tabs class="mat-elevation-z3" backgroundColor="primary">
                                <mat-tab><ng-template mat-tab-label><mat-icon>feed</mat-icon></ng-template></mat-tab>
                                <mat-tab><ng-template mat-tab-label><mat-icon>cast_for_education</mat-icon></ng-template></mat-tab>
                                <mat-tab><ng-template mat-tab-label><mat-icon>rule</mat-icon></ng-template></mat-tab>
                                <mat-tab><ng-template mat-tab-label><mat-icon svgIcon="wand_magic_sparkles" class="wand-icon"></mat-icon></ng-template></mat-tab>
                                <mat-tab><ng-template mat-tab-label><mat-icon>format_list_numbered</mat-icon></ng-template></mat-tab>
                            </mat-tab-group>
                            <mat-tab-group *ngIf="layout == 'desktop'"  
                                            [selectedIndex]="activeTabIndex" (selectedIndexChange)="activeTabIndex = $event" 
                                            mat-align-tabs="center">
                                <mat-tab><ng-template mat-tab-label><mat-icon>feed</mat-icon>&nbsp;Summary</ng-template></mat-tab>
                                <mat-tab><ng-template mat-tab-label><mat-icon>cast_for_education</mat-icon>&nbsp;Training</ng-template></mat-tab>
                                <mat-tab><ng-template mat-tab-label><mat-icon>rule</mat-icon>&nbsp;Evaluation</ng-template></mat-tab>
                                <mat-tab><ng-template mat-tab-label><mat-icon svgIcon="wand_magic_sparkles" class="wand-icon"></mat-icon>&nbsp;Positions</ng-template></mat-tab>
                                <mat-tab><ng-template mat-tab-label><mat-icon>format_list_numbered</mat-icon>&nbsp;Epochs</ng-template></mat-tab>
                            </mat-tab-group>

                            <!-- Early Stopping -->
                            <p *ngIf="cert.classification_evaluation.early_stopping" class="early-stopping">
                                <mat-icon>bug_report</mat-icon> {{cert.classification_evaluation.early_stopping}}
                            </p>
    
                            <!-- Summary -->
                            <div *ngIf="activeTabIndex == 0" class="summary-content fadeIn">
                                <div fxLayout="row" fxLayout.xs="column" fxLayout.sm="column">
                                    <!-- Informational Cards-->
                                    <div fxFlex="44" fxFlex.xs="100" fxFlex.sm="100" class="full-width">
                                        <!-- Training Certificate -->
                                        <div class="desktop-card">
                                            <div class="certificate-header badged-header" fxLayout="row" fxLayoutAlign="start center">
                                                <h3 class="truncate">{{layout == 'desktop' ? "Certificate": "Cert."}}</h3>
                                                <span fxFlex></span>
                                                <div class="square-badge clickable" role="button" 
                                                    matTooltip="Test Dataset Evaluation Accuracy" 
                                                    (click)="activeTabIndex=1">
                                                    {{cert.test_evaluation[1] | percent: '1.2-2'}}
                                                </div>
                                                <div class="square-badge clickable" role="button" 
                                                    matTooltip="Classification Evaluation Accuracy" 
                                                    (click)="activeTabIndex=2">
                                                    {{cert.classification_evaluation.acc | number: '1.2-2'}}%
                                                </div>
                                                <div class="square-badge clickable" role="button" 
                                                    matTooltip="Classification Evaluation Points Median" 
                                                    (click)="activeTabIndex=2">
                                                    {{cert.classification_evaluation.points_median | number: '1.2-2'}}
                                                </div>
                                            </div>

                                            <p class="ts-m margin-top">{{cert.description}}</p>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Class.</p>
                                                <span fxFlex></span>
                                                <app-classification-element [config]="cert.classification_config"></app-classification-element>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text truncate">Keras Model</p>
                                                <span fxFlex></span>
                                                <p class="clickable" role="button" 
                                                    matTooltip="Configuration used to build the Keras Classification Model"
                                                    (click)="_nav.displayDataDialog('KerasModelConfiguration', cert.keras_model_config)">
                                                    {{cert.keras_model_config.name}}
                                                </p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text truncate">Optimizer</p>
                                                <span fxFlex></span>
                                                <p>{{cert.optimizer}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Loss</p>
                                                <span fxFlex></span>
                                                <p>{{cert.loss}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Metric</p>
                                                <span fxFlex></span>
                                                <p>{{cert.metric}}</p>
                                            </div>
                                        </div>

                                        <div class="divider show-on-mobile"></div>

                                        <!-- Training Data -->
                                        <div class="desktop-card">
                                            <div fxLayout="row" fxLayoutAlign="start start">
                                                <h3 class="truncate">Training Data</h3>
                                                <span fxFlex></span>
                                                <div class="square-badge" 
                                                    matTooltip="Steps: The number of prediction candlesticks it will skip for every position when building
                                                        the data regardless of how long a position takes to be closed.">
                                                    Steps: {{cert.training_data_summary.steps}}
                                                </div>
                                            </div>

                                            <p class="ts-m margin-top">{{cert.training_data_summary.description}}</p>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">ID</p>
                                                <span fxFlex></span>
                                                <p class="clickable" role="button" 
                                                    (click)="_clipboard.copy(cert.training_data_summary.id)">
                                                    {{cert.training_data_summary.id | stringOverview: 8}}
                                                </p>
                                            </div>

                                            <div class="margin-top" fxLayout="row" fxLayoutAlign="start center">
                                                <p class="light-text truncate">Regr. Selection</p>
                                                <span fxFlex></span>
                                                <p class="clickable" (click)="_clipboard.copy(cert.training_data_summary.regression_selection_id)">
                                                    {{cert.training_data_summary.regression_selection_id | stringOverview: 8}}
                                                </p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Start</p>
                                                <span fxFlex></span>
                                                <p>{{cert.training_data_summary.start | date:'medium'}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">End</p>
                                                <span fxFlex></span>
                                                <p>{{cert.training_data_summary.end | date:'medium'}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Train Size</p>
                                                <span fxFlex></span>
                                                <p>{{cert.training_data_summary.train_size}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Test Size</p>
                                                <span fxFlex></span>
                                                <p>{{cert.training_data_summary.test_size}}</p>
                                            </div>

                                            <!-- Up & Down Percent Changes-->
                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text truncate">Price Actions</p>
                                                <span fxFlex></span>
                                                <p class="success-color" matTooltip="Up Percent Change">
                                                    {{cert.training_data_summary.up_percent_change}}%
                                                </p>
                                                <p>&nbsp;/&nbsp;</p>
                                                <p class="error-color" matTooltip="Down Percent Change">
                                                    {{cert.training_data_summary.down_percent_change}}%
                                                </p>
                                            </div>

                                            <!-- Technical Analysis -->
                                            <div class="margin-top" fxLayout="row" fxLayoutAlign="start center">
                                                <p class="light-text truncate">Technical Analysis</p>
                                                <span fxFlex></span>
                                                <p class="light-text" 
                                                    *ngIf="!cert.training_data_summary.include_rsi && !cert.training_data_summary.include_stoch && 
                                                    !cert.training_data_summary.include_aroon && !cert.training_data_summary.include_stc && 
                                                    !cert.training_data_summary.include_mfi;else ta_included" >Disabled</p>
                                                <ng-template #ta_included>
                                                    <mat-chip-list>
                                                        <mat-chip matTooltip="Relative Strength Index Indicator" *ngIf="cert.training_data_summary.include_rsi">rsi</mat-chip>
                                                        <mat-chip matTooltip="Stochastic Oscillator Indicator" *ngIf="cert.training_data_summary.include_stoch">stoch</mat-chip>
                                                        <mat-chip matTooltip="Aroon Indicator" *ngIf="cert.training_data_summary.include_aroon">aroon</mat-chip>
                                                        <mat-chip matTooltip="Schaff Trend Cycle Indicator" *ngIf="cert.training_data_summary.include_stc">stc</mat-chip>
                                                        <mat-chip matTooltip="Money Flow Index Indicator" *ngIf="cert.training_data_summary.include_mfi">mfi</mat-chip>
                                                    </mat-chip-list>
                                                </ng-template>
                                            </div>
                                        </div>
                                    </div>

                                    <span fxFlex></span>
                                    <div class="divider show-on-mobile"></div>

                                    <!-- General Evaluation -->
                                    <div fxFlex="54" fxFlex.xs="100" fxFlex.sm="100" class="full-width general-evaluation">
                                        <div class="desktop-card">
                                            <!-- Header -->
                                            <div class="badged-header general-header" fxLayout="row" fxLayoutAlign="start center">
                                                <h3 class="truncate">General Evaluation</h3>
                                                <span fxFlex></span>
                                                <div class="square-badge"
                                                    [ngClass]="cert.general.state_class"
                                                    matTooltip="Total points collected during the general evaluation.">
                                                    {{cert.general.points | number: '1.0-2'}} / {{cert.general.max_points | number: '1.0-2'}}
                                                </div>
                                            </div>

                                            <!-- Categories -->
                                            <div class="categories-content">
                                                <div *ngFor="let cat of cert.general.categories; last as lastCat; index as catIndex" 
                                                    class="category">
                                                    <!-- Header -->
                                                    <div class="category-header fake-button" role="button"
                                                        (click)="activeGeneralEvaluationCategory = activeGeneralEvaluationCategory == catIndex ? undefined: catIndex">
                                                        <div fxLayout="row" fxLayoutAlign="start center" >
                                                            <h4 class="truncate">{{cat.name}}</h4>
                                                            <span fxFlex></span>
                                                            <div class="square-badge square-badge-category"
                                                                [ngClass]="cat.state_class"
                                                                matTooltip="Total points collected during the {{cat.name}}.">
                                                                {{cat.points | number: '1.0-2'}} / {{cat.max_points | number: '1.0-2'}}
                                                            </div>
                                                        </div>

                                                        <!-- Description -->
                                                        <p class="light-text">{{cat.description}}</p>
                                                    </div>
    
                                                    <!-- Items -->
                                                    <div *ngIf="activeGeneralEvaluationCategory == catIndex" class="fadeIn">
                                                        <div *ngFor="let item of cat.items; last as lastItem" 
                                                            class="item clickable" role="button" 
                                                            (click)="_nav.displayTooltip(item.name, item.description)">
                                                            <div fxLayout="row" fxLayoutAlign="start start">
                                                                <div fxFlex="80" fxFlex.xs="70" fxFlex.sm="70">
                                                                    <p class="truncate light-text ts-m"><strong>{{item.name}}</strong></p>
                                                                    <p class="light-text ts-s">{{item.state}}</p>
                                                                </div>
                                                                <span fxFlex></span>
                                                                <div [ngClass]="item.state_class" class="square-badge">
                                                                    {{item.points | number: '1.0-2'}} / {{item.max_points | number: '1.0-2'}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
    
                                                    <div *ngIf="!lastCat" class="divider"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- Training -->
                            <div *ngIf="activeTabIndex == 1" class="test-ds-eval-content">
                                <div fxLayout="row" fxLayout.xs="column" fxLayout.sm="column">
                                    <!-- Informational Cards-->
                                    <div fxFlex="40" fxFlex.xs="100" fxFlex.sm="100" class="full-width">
                                        <!-- Training Certificate -->
                                        <div class="desktop-card">
                                            <div class="certificate-header" fxLayout="row" fxLayoutAlign="start center">
                                                <h3 class="truncate">Training</h3>
                                                <span fxFlex></span>
                                                <div class="square-badge clickable" role="button" 
                                                matTooltip="The number of epochs the training process went through before being stopped by the EarlyStopping Callback."
                                                    (click)="activeTabIndex=4">
                                                    Epochs: {{cert.training_history.loss.length}}
                                                </div>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Class.</p>
                                                <span fxFlex></span>
                                                <app-classification-element [config]="cert.classification_config"></app-classification-element>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text truncate">Keras Model</p>
                                                <span fxFlex></span>
                                                <p class="clickable" role="button" 
                                                    matTooltip="Configuration used to build the Keras Classification Model"
                                                    (click)="_nav.displayDataDialog('KerasModelConfiguration', cert.keras_model_config)">
                                                    {{cert.keras_model_config.name}}
                                                </p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text truncate">Optimizer</p>
                                                <span fxFlex></span>
                                                <p>{{cert.optimizer}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Loss</p>
                                                <span fxFlex></span>
                                                <p>{{cert.loss}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Train Size</p>
                                                <span fxFlex></span>
                                                <p>{{cert.training_data_summary.train_size}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text">Test Size</p>
                                                <span fxFlex></span>
                                                <p>{{cert.training_data_summary.test_size}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text truncate">Train Start</p>
                                                <span fxFlex></span>
                                                <p matTooltip="The time when the model started training.">{{cert.training_start | date:'medium'}}</p>
                                            </div>

                                            <div fxLayout="row" fxLayoutAlign="start center" class="margin-top">
                                                <p class="light-text truncate">Train End</p>
                                                <span fxFlex></span>
                                                <p matTooltip="The time when the model finished training.">{{cert.training_end | date:'medium'}}</p>
                                            </div>
                                        </div>

                                        <div class="divider show-on-mobile"></div>

                                        <!-- Test Dataset Evaluation -->
                                        <div class="desktop-card">
                                            <div class="badged-header" fxLayout="row" fxLayoutAlign="start center">
                                                <h3 class="truncate">{{layout == 'desktop' ? 'Test Dataset Evaluation': 'T. DS Eval'}}</h3>
                                                <span fxFlex></span>
                                                <div class="square-badge-error" matTooltip="Test Dataset Evaluation Loss">
                                                    {{cert.test_evaluation[0] | number: '1.2-3'}}
                                                </div>
                                                <div class="square-badge-success" matTooltip="Test Dataset Evaluation Accuracy">
                                                    {{cert.test_evaluation[1] | number: '1.2-3'}}
                                                </div>
                                            </div>
                                            <apx-chart
                                                [series]="testDSEvaluation.series"
                                                [chart]="testDSEvaluation.chart"
                                                [plotOptions]="testDSEvaluation.plotOptions"
                                                [xaxis]="testDSEvaluation.xaxis"
                                                [yaxis]="testDSEvaluation.yaxis"
                                                [dataLabels]="testDSEvaluation.dataLabels"
                                                [colors]="testDSEvaluation.colors"
                                                [grid]="testDSEvaluation.grid"
                                                [legend]="{show: true, position: 'bottom'}"
                                            ></apx-chart>
                                        </div>
                                    </div>

                                    <span fxFlex></span>
                                    <div class="divider show-on-mobile"></div>

                                    <!-- Training Charts -->
                                    <div fxFlex="58" fxFlex.xs="100" fxFlex.sm="100" class="full-width">
                                        <!-- Loss -->
                                        <div class="desktop-card">
                                            <div class="loss-header badged-header" fxLayout="row" fxLayoutAlign="start center">
                                                <h3 class="truncate">{{layout == 'desktop' ? 'Training & Validation Loss': 'Loss'}}</h3>
                                                <span fxFlex></span>
                                                <div class="square-badge loss" matTooltip="Final Train Loss">
                                                    {{cert.training_history.loss[cert.training_history.loss.length - 1] | number: '1.2-3'}}
                                                </div>
                                                <div class="square-badge val-loss" matTooltip="Final Validation Loss">
                                                    {{cert.training_history.val_loss[cert.training_history.val_loss.length - 1] | number: '1.2-3'}}
                                                </div>
                                            </div>
                                            <apx-chart
                                                [series]="testDSLoss.series"
                                                [chart]="testDSLoss.chart"
                                                [xaxis]="testDSLoss.xaxis"
                                                [dataLabels]="testDSLoss.dataLabels"
                                                [grid]="testDSLoss.grid"
                                                [stroke]="testDSLoss.stroke"
                                                [yaxis]="testDSLoss.yaxis"
                                            ></apx-chart>
                                        </div>

                                        <div class="divider show-on-mobile"></div>

                                        <!-- Accuracy -->
                                        <div class="desktop-card">
                                            <div class="accuracy-header badged-header" fxLayout="row" fxLayoutAlign="start center">
                                                <h3 class="truncate">{{layout == 'desktop' ? 'Training & Validation Accuracy': 'Accuracy'}}</h3>
                                                <span fxFlex></span>
                                                <div *ngIf="cert.training_history.categorical_accuracy" class="square-badge accuracy" matTooltip="Final Train Accuracy">
                                                    {{cert.training_history.categorical_accuracy[cert.training_history.categorical_accuracy.length - 1] | number: '1.2-3'}}
                                                </div>
                                                <div *ngIf="cert.training_history.binary_accuracy" class="square-badge accuracy" matTooltip="Final Train Accuracy">
                                                    {{cert.training_history.binary_accuracy[cert.training_history.binary_accuracy.length - 1] | number: '1.2-3'}}
                                                </div>
                                                <div *ngIf="cert.training_history.val_categorical_accuracy" class="square-badge val-accuracy" matTooltip="Final Validation Accuracy">
                                                    {{cert.training_history.val_categorical_accuracy[cert.training_history.val_categorical_accuracy.length - 1] | number: '1.2-3'}}
                                                </div>
                                                <div *ngIf="cert.training_history.val_binary_accuracy" class="square-badge val-accuracy" matTooltip="Final Validation Accuracy">
                                                    {{cert.training_history.val_binary_accuracy[cert.training_history.val_binary_accuracy.length - 1] | number: '1.2-3'}}
                                                </div>
                                            </div>
                                            <apx-chart
                                                [series]="testDSAccuracy.series"
                                                [chart]="testDSAccuracy.chart"
                                                [xaxis]="testDSAccuracy.xaxis"
                                                [dataLabels]="testDSAccuracy.dataLabels"
                                                [grid]="testDSAccuracy.grid"
                                                [stroke]="testDSAccuracy.stroke"
                                                [yaxis]="testDSAccuracy.yaxis"
                                            ></apx-chart>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- Classification Evaluation -->
                            <div *ngIf="activeTabIndex == 2" class="class-evals-content">
                                <div fxLayout="row" fxLayout.xs="column" fxLayout.sm="column" fxLayoutalign="center start">
                                    <!-- Class. Accuracy -->
                                    <div fxFlex="40" fxFlex.xs="100" fxFlex.sm="100" class="full-width">
                                        <div class="desktop-card">
                                            <div class="badged-header" fxLayout="row" fxLayoutAlign="start center">
                                                <h3 class="truncate">{{layout == 'desktop' ? 'Accuracy': 'Acc.'}}</h3>
                                                <span fxFlex></span>
                                                <div class="square-badge-success" matTooltip="Classification Evaluation Increase Accuracy">
                                                    {{cert.classification_evaluation.increase_acc | number: '1.2-2'}}%
                                                </div>
                                                <div class="square-badge-error" matTooltip="Classification Evaluation Decrease Accuracy">
                                                    {{cert.classification_evaluation.decrease_acc | number: '1.2-2'}}%
                                                </div>
                                                <div class="square-badge" matTooltip="Classification Evaluation General Accuracy">
                                                    {{cert.classification_evaluation.acc | number: '1.2-2'}}%
                                                </div>
                                            </div>
                                            <div>
                                                <apx-chart
                                                    [series]="classAccuracy.series"
                                                    [chart]="classAccuracy.chart"
                                                    [plotOptions]="classAccuracy.plotOptions"
                                                    [xaxis]="classAccuracy.xaxis"
                                                    [yaxis]="classAccuracy.yaxis"
                                                    [dataLabels]="classAccuracy.dataLabels"
                                                    [colors]="classAccuracy.colors"
                                                    [grid]="classAccuracy.grid"
                                                ></apx-chart>
                                            </div>
                                        </div>

                                        <div class="divider show-on-mobile"></div>

                                        <div class="desktop-card">
                                            <div class="badged-header" fxLayout="row" fxLayoutAlign="center center">
                                                <h3>{{layout == 'desktop' ? 'Probabilities': 'Probs.'}}</h3>
                                                <span fxFlex></span>
                                                <button mat-icon-button 
                                                        [disabled]="activeProb == 0" 
                                                        (click)="activeProb = activeProb - 1">
                                                        <mat-icon>arrow_left</mat-icon>
                                                </button>
                                                <!-- General Increase Predictions-->
                                                <div *ngIf="activeProb == 0" fxLayout="row" fxLayoutAlign="center center">
                                                    <div class="square-badge" style="background:#4DB6AC"
                                                        matTooltip="The minimum general increase prediction generated by the Classification.">
                                                        {{cert.classification_evaluation.increase_min | number: '1.2-2'}}
                                                    </div>
                                                    <div class="square-badge" style="background:#4DB6AC"
                                                        matTooltip="The mean of the general increase predictions generated by the Classification.">
                                                        {{cert.classification_evaluation.increase_mean | number: '1.2-2'}}
                                                    </div>
                                                    <div class="square-badge" style="background:#4DB6AC"
                                                        matTooltip="The maximum general increase prediction generated by the Classification.">
                                                        {{cert.classification_evaluation.increase_max | number: '1.2-2'}}
                                                    </div>
                                                </div>
        
                                                <!-- Successful Increase Predictions-->
                                                <div *ngIf="activeProb == 1" fxLayout="row" fxLayoutAlign="center center">
                                                    <div class="square-badge-success"
                                                        matTooltip="The minimum successful increase prediction generated by the Classification.">
                                                        {{cert.classification_evaluation.increase_successful_min | number: '1.2-2'}}
                                                    </div>
                                                    <div class="square-badge-success"
                                                        matTooltip="The mean of the successful increase predictions generated by the Classification.">
                                                        {{cert.classification_evaluation.increase_successful_mean | number: '1.2-2'}}
                                                    </div>
                                                    <div class="square-badge-success"
                                                        matTooltip="The maximum successful increase prediction generated by the Classification.">
                                                        {{cert.classification_evaluation.increase_successful_max | number: '1.2-2'}}
                                                    </div>
                                                </div>
        
                                                <!-- General Decrease Predictions-->
                                                <div *ngIf="activeProb == 2" fxLayout="row" fxLayoutAlign="center center">
                                                    <div class="square-badge" style="background:#E57373"
                                                        matTooltip="The minimum general decrease prediction generated by the Classification.">
                                                        {{cert.classification_evaluation.decrease_min | number: '1.2-2'}}
                                                    </div>
                                                    <div class="square-badge" style="background:#E57373"
                                                        matTooltip="The mean of the general decrease predictions generated by the Classification.">
                                                        {{cert.classification_evaluation.decrease_mean | number: '1.2-2'}}
                                                    </div>
                                                    <div class="square-badge" style="background:#E57373"
                                                        matTooltip="The maximum general decrease prediction generated by the Classification.">
                                                        {{cert.classification_evaluation.decrease_max | number: '1.2-2'}}
                                                    </div>
                                                </div>
        
                                                <!-- Successful Decrease Predictions-->
                                                <div *ngIf="activeProb == 3" fxLayout="row" fxLayoutAlign="center center">
                                                    <div class="square-badge-error"
                                                        matTooltip="The minimum successful decrease prediction generated by the Classification.">
                                                        {{cert.classification_evaluation.decrease_successful_min | number: '1.2-2'}}
                                                    </div>
                                                    <div class="square-badge-error"
                                                        matTooltip="The mean of the successful decrease predictions generated by the Classification.">
                                                        {{cert.classification_evaluation.decrease_successful_mean | number: '1.2-2'}}
                                                    </div>
                                                    <div class="square-badge-error"
                                                        matTooltip="The maximum successful decrease prediction generated by the Classification.">
                                                        {{cert.classification_evaluation.decrease_successful_max | number: '1.2-2'}}
                                                    </div>
                                                </div>
                                                <button mat-icon-button 
                                                        [disabled]="activeProb == 3" 
                                                        (click)="activeProb = activeProb + 1">
                                                        <mat-icon>arrow_right</mat-icon>
                                                </button>
                                            </div>
                                            <div class="heat-map">
                                                <mat-grid-list cols="5" [rowHeight]="layout == 'desktop' ? '45px': '30px'">
                                                    <div *ngFor="let item of probsHeatmap">
                                                        <mat-grid-tile><p class="y-label">{{item.prob_range}}</p></mat-grid-tile>
                                                        <mat-grid-tile [matTooltip]="item.increase.state_description" 
                                                                        [ngClass]="item.increase_successful.state_class"></mat-grid-tile>
                                                        <mat-grid-tile [matTooltip]="item.increase_successful.state_description"
                                                                        [ngClass]="item.increase_successful.state_class"></mat-grid-tile>
                                                        <mat-grid-tile [matTooltip]="item.decrease.state_description"
                                                                        [ngClass]="item.decrease.state_class"></mat-grid-tile>
                                                        <mat-grid-tile [matTooltip]="item.decrease_successful.state_description"
                                                                        [ngClass]="item.decrease_successful.state_class"></mat-grid-tile>
                                                    </div>

                                                    <mat-grid-tile></mat-grid-tile>
                                                    <mat-grid-tile class="x-label">Incr.</mat-grid-tile>
                                                    <mat-grid-tile class="x-label">Succ. Incr.</mat-grid-tile>
                                                    <mat-grid-tile class="x-label">Decr.</mat-grid-tile>
                                                    <mat-grid-tile class="x-label">Succ. Decr.</mat-grid-tile>
                                                </mat-grid-list>
                                            </div>
                                        </div>
                                    </div>

                                    <span fxFlex></span>

                                    <div class="divider show-on-mobile"></div>

                                    
                                    <div fxFlex="58" fxFlex.xs="100" fxFlex.sm="100" class="full-width">
                                        
                                        
                                        <!-- Positions Chart -->
                                        <div class="desktop-card">
                                            <div class="badged-header" fxLayout="row" fxLayoutAlign="start center">
                                                <h3 class="truncate">{{layout == "desktop" ? "Positions History": "Pos. Hist."}}</h3>
                                                <span fxFlex></span>
                                                <div class="square-badge" 
                                                    matTooltip="Median of the points collected during the Classification Evaluation">
                                                    Median: {{cert.classification_evaluation.points_median | number: '1.0-2'}}
                                                </div>
                                                <div class="square-badge" 
                                                    *ngIf="cert.classification_evaluation.positions.length"
                                                    matTooltip="Final points collected during the Classification Evaluation">
                                                    Final: {{cert.classification_evaluation.positions[cert.classification_evaluation.positions.length-1].pts | number: '1.0-2'}}
                                                </div>
                                            </div>

                                            <div>
                                                <apx-chart
                                                    [series]="classPoints.series"
                                                    [chart]="classPoints.chart"
                                                    [plotOptions]="classPoints.plotOptions"
                                                    [xaxis]="classPoints.xaxis"
                                                    [dataLabels]="classPoints.dataLabels"
                                                    [colors]="classPoints.colors"
                                                    [grid]="classPoints.grid"
                                                    [legend]="{show: false}"
                                                    [yaxis]="classPoints.yaxis"
                                                ></apx-chart>
                                            </div>
                                        </div>

                                        <div class="divider show-on-mobile"></div>

                                        <div fxLayout="row" fxLayout.xs="column" fxLayout.sm="column" class="full-width">
                                            <!-- Predictions -->
                                            <div fxFlex="49">
                                                <div class="desktop-card">
                                                    <div class="badged-header" fxLayout="row" fxLayoutAlign="start center">
                                                        <h3 class="truncate">{{layout == 'desktop' ? 'Predictions': 'Preds.'}}</h3>
                                                        <span fxFlex></span>
                                                        <div class="square-badge-success" 
                                                            matTooltip="The number of increase predictions generated by the Classification.">
                                                            {{cert.classification_evaluation.increase_num | number}}
                                                        </div>
                                                        <div class="square-badge-error" 
                                                            matTooltip="The number of decrease predictions generated by the Classification.">
                                                            {{cert.classification_evaluation.decrease_num | number}}
                                                        </div>
                                                        <div class="square-badge" 
                                                            matTooltip="The number of non-neutral predictions generated by the Classification.
                                                            A total of {{cert.classification_evaluation.neutral_predictions}} neutral predictions
                                                            were generated.">
                                                            {{cert.classification_evaluation.positions.length | number}}
                                                        </div>
                                                    </div>
    
                                                    <apx-chart
                                                        [series]="classPrediction.series"
                                                        [chart]="classPrediction.chart"
                                                        [labels]="classPrediction.labels"
                                                        [colors]="classPrediction.colors"
                                                        [legend]="classPrediction.legend"
                                                        [responsive]="classPrediction.responsive"
                                                    ></apx-chart>
                                                </div>
                                            </div>

                                            <span fxFlex></span>
                                            <div class="divider show-on-mobile"></div>

                                            <!-- Outcomes -->
                                            <div fxFlex="49">
                                                <div class="desktop-card">
                                                    <div class="badged-header" fxLayout="row" fxLayoutAlign="start center">
                                                        <h3 class="truncate">{{layout == 'desktop' ? 'Outcomes': 'Outs.'}}</h3>
                                                        <span fxFlex></span>
                                                        <div class="square-badge-success" 
                                                            matTooltip="The number of increase outcomes during the evaluation.">
                                                            {{cert.classification_evaluation.increase_outcomes | number}}
                                                        </div>
                                                        <div class="square-badge-error" 
                                                            matTooltip="The number of decrease outcomes during the evaluation.">
                                                            {{cert.classification_evaluation.decrease_outcomes | number}}
                                                        </div>
                                                        <div class="square-badge" 
                                                            matTooltip="The total number outcomes during the evaluation.">
                                                            {{cert.classification_evaluation.increase_outcomes + 
                                                                cert.classification_evaluation.decrease_outcomes | number}}
                                                        </div>
                                                    </div>
        
                                                    <apx-chart
                                                        [series]="classOutcome.series"
                                                        [chart]="classOutcome.chart"
                                                        [labels]="classOutcome.labels"
                                                        [colors]="classOutcome.colors"
                                                        [legend]="classOutcome.legend"
                                                        [responsive]="classOutcome.responsive"
                                                    ></apx-chart>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <!-- Positions -->
                            <div *ngIf="activeTabIndex == 3" class="positions-content fadeIn">
                                <div fxLayout="row" fxLayoutAlign="center center">
                                    <div fxFlex="60" fxFlex.xs="100" fxFlex.sm="100">
                                        <!-- Positions Table -->
                                        <div class="desktop-card">
                                            <table class="bordered highlight">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th>Open</th>
                                                        <th *ngIf="layout == 'desktop'">Close</th>
                                                        <th>Type</th>
                                                        <th>Points</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let p of cert!.classification_evaluation.positions; let i = index" 
                                                        (click)="displayPosition(p)" class="clickable" role="button">
                                                        <td *ngIf="(i+1) <= visiblePositions">
                                                            <p class="light-text">{{i+1}}</p>
                                                        </td>
                                                        <td *ngIf="(i+1) <= visiblePositions">
                                                            <p class="show-on-mobile">{{p.ot | date:'short'}}</p>
                                                            <p class="show-on-desktop">{{p.ot | date:'medium'}}</p>
                                                        </td>
                                                        <td *ngIf="(i+1) <= visiblePositions && layout == 'desktop'">
                                                            <p>{{p.ct | date:'medium'}}</p>
                                                        </td>
                                                        <td *ngIf="(i+1) <= visiblePositions">
                                                            <p [ngClass]="{'success-color': p.t == 1, 'error-color': p.t == -1}">
                                                                {{p.t == 1 ? 'Long': 'Short'}}
                                                            </p>
                                                        </td>
                                                        <td *ngIf="(i+1) <= visiblePositions" class="align-right">
                                                            <p [ngClass]="{'success-color': p.o, 'error-color': !p.o}">
                                                                <strong>{{p.pts}}</strong>
                                                            </p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <!-- Paginator -->
                                        <div *ngIf="visiblePositions <= cert!.classification_evaluation.positions.length" class="paginator">
                                            <button mat-button (click)="visiblePositions=visiblePositions+15">View More</button>
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <!-- Epochs -->
                            <div *ngIf="activeTabIndex == 4" class="epochs-content fadeIn">
                                <div fxLayout="row" fxLayoutAlign="center center">
                                    <div fxFlex fxFlex.xs="100" fxFlex.sm="100">
                                        <!-- Table -->
                                        <div class="data-container" [ngClass]="{'mat-elevation-z3' : layout == 'desktop'}">
                                            <table class="highlight bordered">
                                                <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>loss</th>
                                                        <th>{{cert.training_history.categorical_accuracy ? 'categorical_accuracy': 'binary_accuracy'}}</th>
                                                        <th>val_loss</th>
                                                        <th>{{cert.training_history.categorical_accuracy ? 'val_categorical_accuracy': 'val_binary_accuracy'}}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let row of cert.training_history.loss; index as rowIndex">
                                                        <td><p class="light-text">{{rowIndex+1}}</p></td>
                                                        <td><p>{{cert.training_history.loss[rowIndex]}}</p></td>
                                                        <td>
                                                            <p *ngIf="cert.training_history.categorical_accuracy">
                                                                {{cert.training_history.categorical_accuracy[rowIndex]}}
                                                            </p>
                                                            <p *ngIf="cert.training_history.binary_accuracy">
                                                                {{cert.training_history.binary_accuracy[rowIndex]}}
                                                            </p>
                                                        </td>
                                                        <td><p>{{cert.training_history.val_loss[rowIndex]}}</p></td>
                                                        <td>
                                                            <p *ngIf="cert.training_history.val_categorical_accuracy">
                                                                {{cert.training_history.val_categorical_accuracy[rowIndex]}}
                                                            </p>
                                                            <p *ngIf="cert.training_history.val_binary_accuracy">
                                                                {{cert.training_history.val_binary_accuracy[rowIndex]}}
                                                            </p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </mat-drawer-content>
</mat-drawer-container>